<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç© Donuland Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="donut">üç©</div>
            <h1>Donuland Management System</h1>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p>Inicializuji predikƒçn√≠ syst√©m...</p>
        </div>
    </div>

    <!-- Main Application -->
    <div class="container" id="mainApp">
        <header class="header">
            <h1>üç© Donuland Management System</h1>
            <div class="header-controls">
                <button class="btn btn-primary" onclick="dataManager.loadData()">
                    üîÑ Naƒç√≠st data
                </button>
                <div class="status-indicator" id="statusIndicator">
                    <span class="status-dot"></span>
                    <span>Offline</span>
                </div>
            </div>
        </header>

        <div class="main-content">
            <!-- Sidebar Navigation -->
            <nav class="sidebar">
                <div class="nav-item active" onclick="navigation.showSection('prediction')">
                    <span class="nav-icon">ü§ñ</span>
                    <span>AI Predikce</span>
                </div>
                <div class="nav-item" onclick="navigation.showSection('analysis')">
                    <span class="nav-icon">üìä</span>
                    <span>Anal√Ωza akc√≠</span>
                </div>
                <div class="nav-item" onclick="navigation.showSection('calendar')">
                    <span class="nav-icon">üìÖ</span>
                    <span>Kalend√°≈ô akc√≠</span>
                </div>
                <div class="nav-item" onclick="navigation.showSection('settings')">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Nastaven√≠</span>
                </div>
            </nav>

            <!-- Content Area -->
            <div class="content-area">
                <!-- AI Prediction Section -->
                <section id="prediction" class="section active">
                    <div class="section-header">
                        <h2>ü§ñ AI Predikce prodeje</h2>
                        <p>Inteligentn√≠ predikce zalo≈æen√° na historick√Ωch datech, poƒças√≠ a lokaci</p>
                    </div>

                    <!-- Event Information Form -->
                    <div class="card">
                        <h3>üéØ Informace o akci</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="eventName">N√°zev akce *</label>
                                <input type="text" id="eventName" placeholder="Zadejte n√°zev akce" 
                                       list="eventNamesList" onchange="predictor.updatePrediction()">
                                <datalist id="eventNamesList"></datalist>
                            </div>
                            
                            <div class="form-group">
                                <label for="eventCategory">Kategorie akce *</label>
                                <select id="eventCategory" onchange="predictor.updatePrediction()">
                                    <option value="">Vyberte kategorii</option>
                                    <option value="food festival">Food festival</option>
                                    <option value="veletrh">Veletrh/ƒåokoFest</option>
                                    <option value="koncert">Koncert</option>
                                    <option value="rodinn√Ω festival">Rodinn√Ω festival</option>
                                    <option value="kulturn√≠ akce (rodinn√°)">Kulturn√≠ akce (rodinn√°)</option>
                                    <option value="Sportovn√≠ akce (dospƒõl√≠)">Sportovn√≠ akce (dospƒõl√≠)</option>
                                    <option value="ostatn√≠">Ostatn√≠</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="eventCity">Mƒõsto akce *</label>
                                <input type="text" id="eventCity" placeholder="Zadejte mƒõsto..." 
                                       list="citiesList" onchange="predictor.updateDistance(); predictor.updateWeather(); predictor.updatePrediction();">
                                <datalist id="citiesList">
                                    <!-- ƒåesk√© mƒõsta -->
                                    <option value="Praha">
                                    <option value="Brno">
                                    <option value="Ostrava">
                                    <option value="Plze≈à">
                                    <option value="Liberec">
                                    <option value="Olomouc">
                                    <option value="ƒåesk√© Budƒõjovice">
                                    <option value="Hradec Kr√°lov√©">
                                    <option value="√öst√≠ nad Labem">
                                    <option value="Pardubice">
                                    <option value="Zl√≠n">
                                    <option value="Kladno">
                                    <option value="Most">
                                    <option value="Karvin√°">
                                    <option value="Opava">
                                    <option value="Fr√Ωdek-M√≠stek">
                                    <option value="Dƒõƒç√≠n">
                                    <option value="Teplice">
                                    <option value="Chomutov">
                                    <option value="Jihlava">
                                    <option value="Mlad√° Boleslav">
                                    <option value="Prostƒõjov">
                                    <option value="P≈ôerov">
                                    <option value="Jablonec nad Nisou">
                                    <option value="T≈ôeb√≠ƒç">
                                    <option value="Karlovy Vary">
                                    <option value="ƒåesk√° L√≠pa">
                                    <option value="T≈ôinec">
                                    <option value="T√°bor">
                                    <option value="Kol√≠n">
                                    <option value="P≈ô√≠bram">
                                    <option value="Cheb">
                                    <option value="Trutnov">
                                    <option value="Znojmo">
                                    <option value="Mari√°nsk√© L√°znƒõ">
                                    <option value="Kutn√° Hora">
                                    <option value="Podƒõbrady">
                                    <option value="Vset√≠n">
                                    <option value="Kromƒõ≈ô√≠≈æ">
                                    <option value="Jind≈ôich≈Øv Hradec">
                                    <option value="≈Ωƒè√°r nad S√°zavou">
                                    <!-- Evropsk√° mƒõsta -->
                                    <option value="V√≠de≈à, Rakousko">
                                    <option value="Bratislava, Slovensko">
                                    <option value="Budape≈°≈•, Maƒèarsko">
                                    <option value="Var≈°ava, Polsko">
                                    <option value="Krakov, Polsko">
                                    <option value="Berl√≠n, Nƒõmecko">
                                    <option value="Mnichov, Nƒõmecko">
                                    <option value="Dr√°≈æƒèany, Nƒõmecko">
                                </datalist>
                            </div>
                            
                            <div class="form-group">
                                <label for="eventDate">Datum akce *</label>
                                <input type="date" id="eventDate" onchange="predictor.updateWeather(); predictor.updatePrediction();">
                            </div>
                            
                            <div class="form-group">
                                <label for="expectedVisitors">Oƒçek√°van√° n√°v≈°tƒõvnost *</label>
                                <input type="number" id="expectedVisitors" placeholder="Poƒçet n√°v≈°tƒõvn√≠k≈Ø" 
                                       min="50" onchange="predictor.updatePrediction()">
                            </div>
                            
                            <div class="form-group">
                                <label for="eventDuration">D√©lka akce (dny)</label>
                                <select id="eventDuration" onchange="predictor.updatePrediction()">
                                    <option value="1">1 den</option>
                                    <option value="2">2 dny</option>
                                    <option value="3">3 dny</option>
                                    <option value="4">4 dny</option>
                                    <option value="5">5 dn√≠</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="competition">Konkurence *</label>
                                <select id="competition" onchange="predictor.updatePrediction()">
                                    <option value="">Vyberte √∫rove≈à konkurence</option>
                                    <option value="1">1 - Mal√° konkurence</option>
                                    <option value="2">2 - St≈ôedn√≠ konkurence</option>
                                    <option value="3">3 - Velk√° konkurence</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="businessModel">Business model *</label>
                                <select id="businessModel" onchange="ui.updateBusinessModelInfo(this.value); predictor.updatePrediction();">
                                    <option value="">Vyberte model</option>
                                    <option value="owner">üè™ Majitel (vy + 2 brig√°dn√≠ci)</option>
                                    <option value="employee">üë®‚Äçüíº Zamƒõstnanec (vy + 1 brig√°dn√≠k + 5% z obratu)</option>
                                    <option value="franchise">ü§ù Fran≈°√≠zant (prodej donut≈Ø za 52 Kƒç)</option>
                                </select>
                                <div id="businessModelInfo" class="business-model-info"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Costs Configuration -->
                    <div class="card">
                        <h3>üí∞ N√°klady a n√°jem</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="rentType">Typ n√°jmu *</label>
                                <select id="rentType" onchange="ui.updateRentInputs(this.value); predictor.updatePrediction();">
                                    <option value="">Vyberte typ n√°jmu</option>
                                    <option value="fixed">Fixn√≠ n√°jem</option>
                                    <option value="percentage">% z obratu</option>
                                    <option value="mixed">Fixn√≠ + % z obratu</option>
                                    <option value="free">Zdarma/bez n√°jmu</option>
                                </select>
                            </div>
                            
                            <div class="form-group" id="fixedRentGroup" style="display: none;">
                                <label for="fixedRent">Fixn√≠ n√°jem (Kƒç)</label>
                                <input type="number" id="fixedRent" placeholder="5000" onchange="predictor.updatePrediction()">
                            </div>
                            
                            <div class="form-group" id="percentageRentGroup" style="display: none;">
                                <label for="percentageRent">% z obratu</label>
                                <input type="number" id="percentageRent" placeholder="15" min="0" max="100" onchange="predictor.updatePrediction()">
                            </div>
                            
                            <div class="form-group" id="mixedFixedGroup" style="display: none;">
                                <label for="mixedFixed">Fixn√≠ ƒç√°st (Kƒç)</label>
                                <input type="number" id="mixedFixed" placeholder="2000" onchange="predictor.updatePrediction()">
                            </div>
                            
                            <div class="form-group" id="mixedPercentageGroup" style="display: none;">
                                <label for="mixedPercentage">% ƒç√°st z obratu</label>
                                <input type="number" id="mixedPercentage" placeholder="10" min="0" max="100" onchange="predictor.updatePrediction()">
                            </div>
                            
                            <div class="form-group">
                                <label for="distance">Vzd√°lenost od Prahy (km)</label>
                                <input type="number" id="distance" readonly placeholder="Automaticky vypoƒç√≠t√°no">
                            </div>
                            
                            <div class="form-group">
                                <label for="donutPrice">Prodejn√≠ cena donut (Kƒç)</label>
                                <input type="number" id="donutPrice" value="50" step="1" onchange="predictor.updatePrediction()">
                            </div>
                        </div>
                    </div>

                    <!-- Weather Forecast -->
                    <div class="card">
                        <h3>üå§Ô∏è P≈ôedpovƒõƒè poƒças√≠</h3>
                        <div id="weatherDisplay">
                            <p>üìç Vyberte mƒõsto a datum pro naƒçten√≠ p≈ôedpovƒõdi poƒças√≠</p>
                        </div>
                    </div>

                    <!-- Historical Data Insights -->
                    <div class="card" id="historicalInsights" style="display: none;">
                        <h3>üìà Historick√° data pro tuto akci</h3>
                        <div id="historicalData"></div>
                    </div>

                    <!-- Prediction Results -->
                    <div class="card prediction-results">
                        <h3>üìä V√Ωsledky predikce</h3>
                        <div id="predictionResults">
                            <p>üìã Vypl≈àte v≈°echny povinn√© √∫daje (oznaƒçen√© *) pro zobrazen√≠ predikce</p>
                        </div>
                    </div>
                </section>

                <!-- Analysis Section -->
                <section id="analysis" class="section">
                    <div class="section-header">
                        <h2>üìä Anal√Ωza akc√≠</h2>
                        <p>P≈ôehled √∫spƒõ≈°nosti akc√≠ a statistiky</p>
                    </div>
                    
                    <div class="card">
                        <h3>üìà Celkov√© statistiky</h3>
                        <div id="overallStats">
                            <div class="loading-inline">
                                <div class="spinner"></div>
                                <span>Naƒç√≠t√°m statistiky...</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>üèÜ Nej√∫spƒõ≈°nƒõj≈°√≠ akce</h3>
                        <div id="topEvents">
                            <div class="loading-inline">
                                <div class="spinner"></div>
                                <span>Analyzuji akce...</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>üìç Nejlep≈°√≠ mƒõsta</h3>
                        <div id="topCities">
                            <div class="loading-inline">
                                <div class="spinner"></div>
                                <span>Vyhodnocuji mƒõsta...</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>üìä Anal√Ωza podle kategori√≠</h3>
                        <div id="categoryAnalysis">
                            <div class="loading-inline">
                                <div class="spinner"></div>
                                <span>Analyzuji kategorie...</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Calendar Section -->
                <section id="calendar" class="section">
                    <div class="section-header">
                        <h2>üìÖ Kalend√°≈ô akc√≠</h2>
                        <p>P≈ôehled nadch√°zej√≠c√≠ch a probƒõhl√Ωch akc√≠</p>
                    </div>

                    <div class="card">
                        <h3>üîÆ Nadch√°zej√≠c√≠ akce</h3>
                        <div id="upcomingEvents">
                            <div class="loading-inline">
                                <div class="spinner"></div>
                                <span>Naƒç√≠t√°m nadch√°zej√≠c√≠ akce...</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>üìà Ned√°vn√© akce s v√Ωsledky</h3>
                        <div id="recentEvents">
                            <div class="loading-inline">
                                <div class="spinner"></div>
                                <span>Naƒç√≠t√°m ned√°vn√© akce...</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Settings Section -->
                <section id="settings" class="section">
                    <div class="section-header">
                        <h2>‚öôÔ∏è Nastaven√≠</h2>
                        <p>Konfigurace API kl√≠ƒç≈Ø a parametr≈Ø</p>
                    </div>
                    
                    <div class="card">
                        <h3>üîó API konfigurace</h3>
                        <div class="form-group">
                            <label for="googleSheetsUrl">Google Sheets URL</label>
                            <input type="url" id="googleSheetsUrl" 
                                   value="https://docs.google.com/spreadsheets/d/1LclCz9hb0hlb1D92OyVqk6Cbam7PRK6KgAzGgiGs6iE/edit?usp=sharing">
                        </div>
                        
                        <div class="form-group">
                            <label for="weatherApiKey">OpenWeather API Key</label>
                            <input type="password" id="weatherApiKey" value="c2fb0e86623880dc86162892b0fd9c95">
                        </div>
                        
                        <div class="form-group">
                            <label for="mapsApiKey">Google Maps API Key</label>
                            <input type="password" id="mapsApiKey" value="AIzaSyBTTA_MKa6FrxKpkcd7c5-d3FnC6FBLVTc">
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <button class="btn btn-primary" onclick="settings.saveSettings()">üíæ Ulo≈æit nastaven√≠</button>
                            <button class="btn btn-secondary" onclick="settings.testConnections()" style="margin-left: 10px;">üîß Test p≈ôipojen√≠</button>
                            <button class="btn btn-warning" onclick="settings.resetToDefaults()" style="margin-left: 10px;">üîÑ Reset</button>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3>üíº Business parametry</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="donutCost">N√°klad na donut (Kƒç)</label>
                                <input type="number" id="donutCost" value="32" step="0.1">
                            </div>
                            
                            <div class="form-group">
                                <label for="franchisePrice">Cena pro fran≈°√≠zanty (Kƒç)</label>
                                <input type="number" id="franchisePrice" value="52" step="0.1">
                            </div>
                            
                            <div class="form-group">
                                <label for="hourlyWage">Hodinov√° mzda (Kƒç/h)</label>
                                <input type="number" id="hourlyWage" value="150">
                            </div>

                            <div class="form-group">
                                <label for="workHours">Pracovn√≠ hodin na akci</label>
                                <input type="number" id="workHours" value="10">
                            </div>

                            <div class="form-group">
                                <label for="fuelCostPerKm">N√°klady na dopravu (Kƒç/km)</label>
                                <input type="number" id="fuelCostPerKm" value="15" step="0.1">
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="settings.exportSettings()">üì§ Export nastaven√≠</button>
                            <button class="btn btn-secondary" onclick="settings.importSettings()" style="margin-left: 10px;">üì• Import nastaven√≠</button>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="utils.js"></script>
    <script src="dataManager.js"></script>
    <script src="ui.js"></script>
    <script src="weatherService.js"></script>
    <script src="mapsService.js"></script>
    <script src="predictor.js"></script>
    <script src="analysis.js"></script>
    <script src="navigation.js"></script>
    <script src="settings.js"></script>
    <script src="app.js"></script>
</body>
</html>
